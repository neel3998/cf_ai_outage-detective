name = "cf-ai-outage-detective"
main = "src/index.ts"
compatibility_date = "2024-11-26"
account_id = "ae73086fd4c54460e732cc9c4f61d734"

# Workers AI binding
[ai]
binding = "AI"

# Durable Objects configuration
[[durable_objects.bindings]]
name = "INCIDENT_STORE"
class_name = "IncidentStore"
script_name = "cf_ai_outage-detective"

[[durable_objects.bindings]]
name = "SERVICE_MONITOR"
class_name = "ServiceMonitor"
script_name = "cf_ai_outage-detective"

# Durable Objects migrations
[[migrations]]
tag = "v1"
new_sqlite_classes = ["IncidentStore", "ServiceMonitor"]

# Workflows configuration
[[workflows]]
name = "monitor-workflow"
class_name = "MonitorWorkflow"
binding = "MONITOR_WORKFLOW"

[[workflows]]
name = "analysis-workflow"
class_name = "AnalysisWorkflow"
binding = "ANALYSIS_WORKFLOW"

# Build configuration
[build]
command = "npm run build"

[build.upload]
format = "service-worker"